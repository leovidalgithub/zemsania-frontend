<div id="imputeHours">
    <!-- HEADER TOOL-BAR -->
    <header id="header">
        <div id="headerContent">
            <div class="flexDesign box-shadow p20 top-bar">
                <div>
                    <h3>Imputar Horas</h3>
                </div>
                 <div class="rightMargin">
                     <button ng-disabled="!changes.pendingChanges" class="btn btn-gray no-margin" ng-click="openPendingChangesModal()">
                        {{'actions.cancel' | i18next}}
                    </button>
                    <button ng-disabled="!changes.pendingChanges" class="btn no-margin" ng-click="save()"
                            ng-class="{ 'btn-gray': !changes.pendingChanges, 'btn-primary': changes.pendingChanges}">
                            {{'actions.save' | i18next}}
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- SECTION MAIN CONTENT -->
    <section id="section" class="box-shadow p20">
<!-- <button class="btn btn-lg" style="background-color: #05AE88; color: white;font-size: 17px;" ng-click="fn()">Go!!</button> -->

        <!-- ALERTS MESSAGES -->
        <div id="alertMessage">
            <div class="row">
                <div class="col-xs-offset-1 col-xs-10">
                    <div class="collapse msgAlert">
                        <div style="text-align: center; font-size: 16px;" class="alert alert-dismissible" role="alert"
                            ng-class="{'alert-danger': !alerts.success, 'alert-success': alerts.success }">
                            <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                            <span>{{alerts.message}}!</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- OPTIONS -->
        <div id="imputeOptions" class="simple-input">
            <div class="form-group row">
                <!-- PROJECTS -->
                <div class="col-xs-12">
                    <label for="projects">{{'words.projects' | i18next}}</label>
                    <select ng-options="project as project.name for project in userProjects | orderBy : 'name'" ng-model="projectModel" ng-change="projectChanged()" id="projects"></select>
                </div>
            </div>
            <div class="form-group row">
                <!-- TYPES -->
                <div class="col-xs-12 col-md-3">
                    <label for="imputeTypes">{{'words.type' | i18next}}</label>
                    <select ng-options="type for type in imputeTypes" ng-model="typesModel" ng-change="imputeTypeChanged()"
                             id="imputeTypes"></select>
                </div>
                <!-- SUBTYPES -->
                <div class="col-xs-12 col-md-4">
                    <label for="imputeSubTypes">{{'words.subType' | i18next}}</label>
                    <select ng-options="subType for subType in imputeTypes[typesModel]" ng-disabled="!typesModel" ng-model="subtypesModel" ng-change="imputeSubTypeChanged()" id="imputeSubTypes"></select>
                </div>
                <!-- BUTTONS -->
                <div class="col-xs-12 col-md-5">
                    <button class="btn btn-primary" ng-click="moveDate(-1)" title="{{'words.previous' | i18next}}">
                        <i class="fa fa-arrow-left"></i></button>
                    <button class="btn btn-primary" ng-click="moveDate(+1)" title="{{'words.next' | i18next}}">
                        <i class="fa fa-arrow-right"></i></button>
                    <button ng-show="weekViewMode" class="btn btn-primary" ng-click="monthWeekViewSwap()"
                             title="{{'calendar.imputeHours.changeToMonthView' | i18next}}">
                            {{'calendar.imputeHours.monthView' | i18next}}
                    </button>
                    <button ng-hide="weekViewMode" class="btn btn-primary" ng-click="monthWeekViewSwap()"
                             title="{{'calendar.imputeHours.changeToWeekView' | i18next}}">
                            {{'calendar.imputeHours.weekView' | i18next}}
                    </button>
                </div>
            </div>
        </div>

        <!-- MONTH INFO -->
        <div id="monthInfo">
            <p>{{'months.' + showDaysObj.monthName | i18next}}  {{showDaysObj.currentYear}}
            <span ng-show="weekViewMode">{{'words.week' | i18next}} NÂº {{showDaysObj.currentWeek + 1}}</span></p>
        </div>

        <!-- MONTH DAYS -->
        <div id="daysDiv"> 
            <div class="myWeek" ng-repeat="(keyWeek, week) in showDaysObj.weeks">
                <div class="myDay {{day.dayType}}" ng-repeat="(keyDay, day) in week"
                     ng-class="{'desactive': showDaysObj.currentMonth!=day.thisMonth}"
                     ng-hide="((weekViewMode == true) && (showDaysObj.currentWeek != day.week))">
                    <div class="myHeader">
                        {{'days.' + (day.day | amDateFormat:'ddd') | i18next}}
                        {{day.day | amDateFormat:'DD'}} <!-- {{day.day | date : 'dd/MMM/yyyy'}} -->
                    </div>
                    <div class="myInput">

                        <input ng-show="(day.inputType == 'number') && (showDaysObj.currentMonth==day.thisMonth)" 
                                class="form-control input-sm" type="number" step="0.5" min="0" max="24" 
                                ng-change="inputChanged(day)" ng-model="day.value" />

                        <input ng-show="(day.inputType == 'checkbox') && (showDaysObj.currentMonth==day.thisMonth)" 
                                class="form-control input-sm" type="checkbox" value="{{day.checkValue}}"
                                ng-model="day.checkValue" ng-change="inputChanged(day)">
                     </div>
                    <div class="myFooter" ng-show="showDaysObj.currentMonth==day.thisMonth">
                        <a class="btn btn-xs btn-warning" title="{{'calendar.imputeHours.expenses' | i18next}}">
                            <i class="fa fa-eur"></i></a>
                        <a class="btn btn-xs btn-danger" title="{{'words.comments' | i18next}}">
                            <i class="fa fa-comment"></i></a>
                    </div>
                </div>
            </div>
        </div>

<hr><!-- STATISTICS CONTROLLER **************************************************************************************************** -->
        <div ng-controller="imputeHoursStatsController">
            <div id="statistics">

                <!-- LEYEND -->
                <div id="leyend">
                    <div id="workingLeyend"><div class="leyendBox"></div><span>{{'calendars.workingDays' | i18next}}</span></div>
                    <div id="workingRange"></div>
                    <div id="fridayLeyend"><div class="leyendBox"></div><span>{{'calendars.fridays' | i18next}}</span></div>
                    <div id="fridayRange"></div>
                    <div id="intensiveLeyend"><div class="leyendBox"></div><span>{{'calendars.intensiveDays' | i18next}}</span></div>
                    <div id="intensiveRange"></div>
                    <div id="specialLeyend"><div class="leyendBox"></div><span>{{'calendars.specialDays' | i18next}}</span></div>
                    <div id="specialRange"></div>
                    <div id="holidaysLeyend"><div class="leyendBox"></div><span>{{'calendars.holidays' | i18next}}</span></div>
                    <div id="non_workingLeyend"><div class="leyendBox"></div><span>{{'calendars.non_workingDays' | i18next}}</span></div>
                </div>

                <!-- PROJECTS TABLE -->
                <div id="projectsTable" class="tableContainer">
                    <table style="table-layout: fixed; width: 500px;">
                        <tr class="notHoverPlease">
                            <th style="width: 46%;">{{'calendar.imputeHours.project' | i18next}}</th>
                            <th style="width: 18%;">{{'calendar.imputeHours.hours' | i18next}}</th>
                            <th style="width: 18%;">{{'calendar.imputeHours.guards' | i18next}}</th>
                            <th style="width: 18%;">{{'calendar.imputeHours.dailywork' | i18next}}</th>
                        </tr>
                        <tr ng-class="{'odd':$odd}" ng-repeat="(key, project) in showStatsObj.projectsInfo">
                            <td>{{project.projectName}}</td>
                            <td>{{project.totalHours}}</td>
                            <td>{{project.totalGuards}}</td>
                            <td>{{project.dailyWork}}</td>
                        </tr>
                    </table>
                </div>

                <!-- SUMMARY TABLE -->
                <div class="tableContainer">
                    <table style="table-layout: fixed; width: 330px;">
                        <tr class="notHoverPlease">
                            <th style="width: 60%;">{{'calendar.imputeHours.summary' | i18next}}</th>
                            <th style="width: 20%;"></th>
                            <th style="width: 20%;">{{'calendar.imputeHours.media' | i18next}}</th>
                        </tr>
                        <tr>
                            <td>{{'calendar.imputeHours.totalHours' | i18next}}</td>
                            <td ng-class="{'imputeHoursOnRed':showStatsObj.summary.totalImputeHours > 
                            showStatsObj.calendarInfo.totalHoursByMonth}">{{showStatsObj.summary.totalImputeHours}}</td>
                            <td>{{showStatsObj.calendarInfo.totalHoursByMonth}}</td>
                        </tr>
                        <tr class="odd">
                            <td>{{'calendar.imputeHours.totalGuards' | i18next}}</td>
                            <td>{{showStatsObj.summary.totalImputeGuards}}</td>
                            <td>0</td>
                        </tr>
                        <tr>
                            <td>{{'calendar.imputeHours.totalDailywork' | i18next}}</td>
                            <td>{{showStatsObj.summary.totalDailyWork}}</td>
                            <td>0</td>
                        </tr>

                    </table>
                </div>

                <!-- DAILYWORK TABLE -->
                <div class="tableContainer">
                    <table style="table-layout: fixed; width: 230px;">
                        <tr class="notHoverPlease">
                            <th style="width: 60%;">{{'calendar.imputeHours.guards' | i18next}}</th>
                            <th style="width: 40%;">{{'calendar.imputeHours.dailywork' | i18next}}</th>
                        </tr>
                        <tr>
                            <td>{{'calendar.imputeHours.turns' | i18next}}</td>
                            <td>{{showStatsObj.guardsInfo.totalTurns}}</td>
                        </tr>
                        <tr class="odd">
                            <td>{{'calendar.imputeHours.guard' | i18next}}</td>
                            <td>{{showStatsObj.guardsInfo.totalGuards}}</td>
                        </tr>
                        <tr>
                            <td>{{'calendar.imputeHours.various' | i18next}}</td>
                            <td>{{showStatsObj.guardsInfo.totalVarious}}</td>
                        </tr>
                    </table>
                </div>

            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer id="footer">
        <div id="footerContent">
            <div class="copyRight">Zemsania Time Manager&copy;</div>
        </div>
    </footer>

</div>
